<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="UTF-8">
  <title>Atspėk ežero pavadinimą</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
    #map { height: 80vh; }
    #quiz {
      padding: 10px;
      background: #f0f0f0;
    }
    #result {
      margin-top: 10px;
      font-weight: bold;
    }
    select {
      padding: 5px;
      font-size: 16px;
    }
  </style>
</head>
<body>

<div id="quiz">
  <div><strong>Kas čia per ežeras?</strong></div>
  <select id="guessSelect">
    <option value="">-- Pasirinkti --</option>
  </select>
  <div id="result"></div>
</div>
<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  const map = L.map('map').setView([55.2, 24.0], 7);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap',
  }).addTo(map);

  const lakes = [
    { name: "Drūkšiai", coords: [55.5936, 26.3303] },
    { name: "Dusia", coords: [54.2839, 23.6878] },
    { name: "Metelys", coords: [54.3167, 23.6833] },
    { name: "Žuvintas", coords: [54.3833, 23.8667] },
    { name: "Sartai", coords: [55.7481, 25.7794] },
    { name: "Plateliai", coords: [56.0500, 21.8500] },
    { name: "Lūkstas", coords: [55.6333, 22.3000] },
    { name: "Vištytis", coords: [54.4500, 22.7333] },
    { name: "Asveja", coords: [55.0900, 25.9433] },
    { name: "Tauragnas", coords: [55.5170, 25.8500] }
  ];

  let currentLake = null;
  let marker = null;

  const guessSelect = document.getElementById("guessSelect");
  const resultDiv = document.getElementById("result");

  // Užpildyti pasirinkimus
  lakes.forEach(lake => {
    const opt = document.createElement("option");
    opt.value = lake.name;
    opt.textContent = lake.name;
    guessSelect.appendChild(opt);
  });

  guessSelect.addEventListener("change", function () {
    if (!currentLake) return;

    const guess = this.value;
    if (guess === currentLake.name) {
      resultDiv.innerHTML = "✅ Teisingai!";
    } else {
      resultDiv.innerHTML = `❌ Neteisingai. Tai buvo <strong>${currentLake.name}</strong>.`;
    }

    // Po 5 sekundžių – naujas ežeras
    setTimeout(startRound, 5000);
  });

  function startRound() {
    resultDiv.textContent = "";
    guessSelect.value = "";

    if (marker) map.removeLayer(marker);

    currentLake = lakes[Math.floor(Math.random() * lakes.length)];
    marker = L.marker(currentLake.coords).addTo(map);
    marker.bindPopup("Koks tai ežeras?").openPopup();
  }

  startRound();
</script>

</body>
</html>
